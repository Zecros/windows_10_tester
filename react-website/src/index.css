
/* Global styles */
:root {
  --color-bg: #F2F2F7;
  --color-bg-secondary: #FFFFFF;
  --color-text: #1C1C1E;
  --color-text-secondary: #8A8A8D;
  --color-primary: #007AFF;
  --color-primary-hover: #005ECC;
  --color-border: #C7C7CC;
}

.dark {
  --color-bg: #1c1c1e;
  --color-bg-secondary: #2b2b2f;
  --color-text: #f2f2f7;
  --color-text-secondary: #c7c7cc;
}
body {
  /* font-family is now handled by Tailwind's 'sans' definition */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--color-text);
  background-color: var(--color-bg);
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
  /* Consider a more iOS-like mono font if available or important */
}

/* Removed unused legacy form styles that conflicted with Tailwind */

/* InfoModal Styles - Review for utility class replacement */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.4); /* Standard iOS overlay dimming */
  z-index: 1000;
}

.info-modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: var(--color-bg-secondary);
  padding: 2rem; /* Consider Tailwind's p-8 */
  border-radius: 14px; /* iOS like rounded corners for modals */
  max-width: 850px;
  width: 92%;
  max-height: 85vh;
  overflow-y: auto;
  z-index: 1001;
  color: var(--color-text);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12); /* More subtle iOS-like shadow */
}

.info-modal h2 {
  color: var(--color-primary);
  margin-bottom: 1.5rem;
  font-size: 1.75rem; /* Consider Tailwind's text-2xl or text-3xl */
  text-align: center;
}

.info-modal h3 {
  color: var(--color-text);
  margin-top: 1.5rem;
  margin-bottom: 1rem;
  font-size: 1.25rem; /* Consider Tailwind's text-xl */
  border-bottom: 1px solid var(--color-border);
  padding-bottom: 0.5rem;
}

.info-modal h4 {
  color: var(--color-primary);
  margin-bottom: 0.5rem;
  font-size: 1.1rem; /* Consider Tailwind's text-lg */
  font-weight: 600; /* Tailwind's font-semibold */
}

.info-modal-close-button {
  position: absolute;
  top: 1rem; /* Adjusted for better spacing */
  right: 1rem; /* Adjusted for better spacing */
  font-size: 1.25rem; /* Slightly smaller for a cleaner look */
  background: none;
  border: none;
  cursor: pointer;
  color: var(--color-text-secondary);
  transition: color 0.2s ease-in-out, transform 0.15s ease-in-out;
  padding: 0.25rem; /* Add some padding to make the click target slightly larger */
  border-radius: 4px; /* Add a slight radius for visual consistency if it ever gets a background */
}

.info-modal-close-button:hover, .info-modal-close-button:focus {
  color: var(--color-text);
  transform: scale(1.1); /* Slight zoom effect */
  outline: none; /* Remove default focus outline if custom styling is clear */
}
.info-modal-close-button:active {
  transform: scale(1.0); /* Press down effect */
}


/* VS Code-like code viewer - These styles are very specific. */
/* They might need a separate, more detailed review if they don't fit the iOS theme. */
/* For now, I'll ensure colors are themed if possible, but the structure is complex. */
.code-editor-container {
  display: flex;
  flex-direction: column;
  width: 100%;
  max-height: 80vh; /* Max height of the entire modal part */
  margin: 1rem auto; /* Some margin for breathing room */
  overflow: hidden;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  background-color: #1E1E1E;
  position: relative;
  border: 1px solid rgba(199, 199, 204, 0.2);
}

/* Toolbar */
.editor-toolbar {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  background-color: #252526;
  border-bottom: 1px solid #333333;
}

.file-tab {
  display: flex;
  align-items: center;
  background-color: #1E1E1E;
  color: #CCCCCC;
  padding: 4px 12px;
  font-size: 0.85rem;
  border-radius: 4px 4px 0 0;
  margin-right: 2px;
}

.file-tab.active {
  background-color: #2D2D2D;
}

.file-icon {
  margin-right: 6px;
  color: #007AFF;
  font-size: 0.9rem;
}

/* Main content: code and explanations */
.editor-content {
  display: flex;
  /* height: 100%; */ /* Let content define height, up to max-height of container */
  flex-grow: 1;
  overflow: hidden; /* Important for child overflow behavior */
  position: relative; /* For absolute positioning of explanations */
}

/* Line numbers */
.line-numbers {
  flex: 0 0 auto; /* Don't grow or shrink, take content width */
  padding: 8px 10px 8px 8px; /* py-2 pr-2.5 pl-2 */
  background-color: #1E1E1E;
  color: #6E6E6E;
  text-align: right;
  font-size: 0.85rem; /* Tailwind text-sm */
  line-height: 1.5; /* Match code line height */
  user-select: none;
  border-right: 1px solid #333333; /* Separator line */
}

.line-number {
  /* padding: 0 10px 0 0; */ /* Handled by .line-numbers padding */
  /* line-height: 1.5; */ /* Inherited or set on .line-numbers */
  display: block; /* Ensure each number takes a line */
}

/* Code content area */
.code-content {
  flex: 1; /* Grow to fill available space */
  position: relative; /* Crucial for absolute positioning of explanations */
  background-color: #1E1E1E;
  color: #D4D4D4; /* Default code color for VS Code dark theme */
  overflow-y: auto; /* Allow vertical scrolling for code */
  padding: 8px 12px; /* py-2 px-3 */
  font-size: 0.875rem; /* text-sm, or adjust as needed */
  line-height: 1.5;
  /* max-height is implicitly controlled by .code-editor-container's max-height minus toolbar */
  /* scrollbar styling already applied from previous turn */
}

.code-content::-webkit-scrollbar {
  width: 10px; /* Slightly wider for easier grabbing if needed */
}
.code-content::-webkit-scrollbar-thumb {
  background-color: #555;
  border-radius: 10px;
  border: 2px solid #1E1E1E;
}
.code-content::-webkit-scrollbar-track {
  background: #2A2A2A; /* Slightly different track */
}


.code-line {
  min-height: 1.5em; /* Ensures empty lines also take up space, 1.5 * font-size */
  white-space: pre; /* Preserve whitespace within the line for indentation */
}

.python-code { /* Applied to the <code> element */
  display: block; /* Ensure it takes full width */
  font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
}


/* Explanation Item Styling */
.explanation-item {
  position: absolute;
  width: 280px; /* Slightly wider */
  background-color: rgba(37, 37, 38, 0.9); /* VS Code tooltip-like dark: #252526 */
  backdrop-filter: blur(4px);
  border: 1px solid rgba(204, 204, 204, 0.15); /* Subtle border */
  border-radius: 6px;
  padding: 12px 15px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  pointer-events: auto;
  z-index: 10; /* Ensure explanations are above code but below modal controls if any overlap */
  transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, border-color 0.2s ease-in-out;
  color: #CCCCCC; /* Light text for dark background */
}

.explanation-item:hover, .explanation-item:focus-within { /* focus-within for accessibility */
  transform: translateY(-3px) scale(1.01); /* Lift and slightly enlarge */
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35); /* More prominent shadow */
  border-color: rgba(204, 204, 204, 0.3); /* Brighter border */
}

.explanation-item h4 {
  color: #007AFF; /* Use themed blue for titles */
  margin: 0 0 8px 0;
  font-size: 0.9rem; /* text-sm */
  font-weight: 600; /* font-semibold */
}

.explanation-item p {
  margin: 0 0 8px 0;
  font-size: 0.85rem; /* Smaller text for details */
  line-height: 1.4;
}

.explanation-item ul {
  margin: 8px 0;
  padding-left: 18px;
  list-style-type: disc;
}

.explanation-item li {
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.explanation-left {
  left: -300px; /* (width + arrow + gap) */
}

.explanation-right {
  right: -300px; /* (width + arrow + gap) */
}

/* Arrow Styling using pseudo-elements */
.explanation-item::after {
  content: '';
  position: absolute;
  top: 20px; /* Adjust to align with title or content */
  width: 0;
  height: 0;
  border-style: solid;
}

.explanation-left::after {
  left: 100%; /* Attach to the right side of the left-positioned box */
  margin-left: 1px; /* Prevent gap due to border */
  border-width: 8px 0 8px 10px; /* Triangle pointing right */
  border-color: transparent transparent transparent rgba(37, 37, 38, 0.9); /* Arrow color matches box bg */
}

.explanation-right::after {
  right: 100%; /* Attach to the left side of the right-positioned box */
  margin-right: 1px; /* Prevent gap due to border */
  border-width: 8px 10px 8px 0; /* Triangle pointing left */
  border-color: transparent rgba(37, 37, 38, 0.9) transparent transparent; /* Arrow color matches box bg */
}


/* Highlighted Code Segments */
.code-highlight-segment {
  background-color: rgba(0, 122, 255, 0.1); /* Subtle blue highlight */
  border-radius: 4px;
  margin: 2px -12px; /* Extend slightly into padding */
  padding: 0px 12px; /* Counteract negative margin */
  transition: background-color 0.2s ease-in-out; /* Smoother transition */
}

/* .explanation-item:hover + .code-content .code-highlight-segment, This won't work due to DOM structure */
.code-highlight-segment:hover {
  background-color: rgba(0, 122, 255, 0.25); /* Slightly more pronounced hover highlight */
}


/* Markers and arrows (Original .code-marker, .connector - removing as per new design) */
/* .code-marker, .connector classes are no longer used from previous version. */
/* .code-marker {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: #007AFF;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  font-weight: bold;
  z-index: 5;
}

.marker-left {
  left: -30px; /* Positioning */

.marker-right {
  right: -30px; /* Positioning */
}

/* Connector lines */
.connector {
  position: absolute;
  background-color: rgba(0, 122, 255, 0.5); /* Themed connector */
  height: 2px;
  z-index: 4;
}
/* Python syntax highlighting - Using existing Dracula-like theme, generally good for dark editors */
.python-code {
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  color: #f8f8f2; /* Default text color for code */
}

.py-keyword { color: #ff79c6; }
.py-string { color: #f1fa8c; }
.py-comment { color: #6272a4; }
.py-number { color: #bd93f9; }
.py-builtin { color: #8be9fd; }
.py-class { color: #50fa7b; }
.py-function { color: #50fa7b; }
.py-variable { color: #f8f8f2; }


/* Responsive design for explanations */
@media (max-width: 1100px) {
  .explanation-left, .explanation-right {
    display: none;
  }
  
  .explanation-mobile {
    display: block;
    position: relative;
    left: auto;
    right: auto;
    width: calc(100% - 24px);
    margin: 12px;
    background-color: rgba(50, 50, 50, 0.9); /* Darker for mobile overlay */
  }
}

/* Removed obsolete form styles to rely fully on Tailwind utilities */

/* Results page styles */
.results-container {
  max-width: 800px;
  margin: 2rem auto; /* Added top/bottom margin */
  padding: 2rem; /* Tailwind p-8 */
  background-color: var(--color-bg-secondary);
  border-radius: 12px; /* iOS like rounded corners */
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.07); /* Softer shadow */
}

.results-title {
  font-size: 1.8rem; /* Consider text-3xl */
  font-weight: 600; /* font-semibold */
  margin-bottom: 1.5rem;
  color: var(--color-text);
  text-align: center;
}

.results-subtitle {
  font-size: 1.4rem; /* Consider text-2xl */
  font-weight: 500; /* font-medium */
  margin-bottom: 1rem;
  color: var(--color-text-secondary);
}

.results-message {
  font-size: 1.1rem; /* Consider text-lg */
  line-height: 1.6;
  margin-bottom: 1.5rem;
  color: var(--color-text);
}

.requirement {
  margin-bottom: 1rem;
  padding: 1rem; /* Tailwind p-4 */
  border-radius: 8px; /* Consistent rounding */
  display: flex;
  align-items: center;
  gap: 1rem; /* Tailwind space-x-4 if horizontal */
  border: 1px solid transparent; /* Base border */
}

.requirement-pass {
  background-color: rgba(52, 199, 89, 0.15); /* Lighter, themed background */
  border-color: rgba(52, 199, 89, 0.5);
}

.requirement-fail {
  background-color: rgba(255, 59, 48, 0.15); /* Lighter, themed background */
  border-color: rgba(255, 59, 48, 0.5);
}

.requirement-text {
  flex: 1;
  color: var(--color-text);
}

.check-icon {
  color: #34C759; /* Themed icon color */
  font-size: 1.5rem;
}

.x-icon {
  color: #FF3B30; /* Themed icon color */
  font-size: 1.5rem;
}

/* Overlay generic content area */
.overlay-content {
  margin-top: 1rem;
}

.side-info-box-inner {
  backdrop-filter: blur(2px);
}

